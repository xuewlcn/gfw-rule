port: 7890
socks-port: 7891
redir-port: 7892
allow-lan: false
mode: rule
log-level: silent
external-controller: '0.0.0.0:9090'
secret: ''
dns:
  enable: true
  ipv6: false
  listen: '0.0.0.0:53'
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  nameserver:
    - 114.114.114.114
    - 'tcp://223.5.5.5'
  fallback:
    - 'tls://223.5.5.5:853'
    - 'https://223.5.5.5/dns-query'
  fallback-filter:
    geoip: true
    ipcidr:
      - 240.0.0.0/4

proxy-providers:
  # https://url.sbcnnet.top/link/fNHtYFEu459Xbzxq?clash=1
  sbcnnet:
    type: http
    path: ./profiles/proxies/sbcnnet.yaml
    url: https://v1.mk/0vKu2us
    interval: 3600
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300
  # https://raw.githubusercontent.com/Jsnzkpg/Jsnzkpg/Jsnzkpg/Jsnzkpg
  Jsnzkpg:
    type: http
    path: ./profiles/proxies/Jsnzkpg.yaml
    url: https://v1.mk/2oVyOJF
    interval: 3600
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300

  # https://mkkhack.pw/Clash
  mkkhack:
    type: http
    path: ./profiles/proxies/mkkhack.yaml
    url: https://v1.mk/OHXseyj
    interval: 3600
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300
  # https://raw.githubusercontent.com/linke5/free-/74516efd3c87c2325c6ef302366070a494a46bc1/Free-new.md
  ShareCentre:
    type: http
    path: ./profiles/proxies/ShareCentre.yaml
    url: https://v1.mk/8FqvePi
    interval: 3600
    health-check:
      enable: true
      url: http://www.gstatic.com/generate_204
      interval: 300


proxy-groups:
  - 
    name: 🔰国外流量
    type: select
    use:
      - sbcnnet
      - Jsnzkpg
      - mkkhack
      - ShareCentre
    proxies:
      - DIRECT
      - ♻️自动选择
  - 
    name: ♻️自动选择
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    use:
      - Jsnzkpg
      - mkkhack
      - ShareCentre
  -
    name: 🍎苹果服务
    type: select
    use:
      - sbcnnet
      - Jsnzkpg
      - mkkhack
      - ShareCentre
    proxies:
      - 🔰国外流量
      - ♻️自动选择
      - 🚀直接连接
  -
    name: 💻微软服务
    type: select
    use:
      - sbcnnet
      - Jsnzkpg
      - mkkhack
      - ShareCentre
    proxies:
      - 🔰国外流量
      - ♻️自动选择
      - 🚀直接连接
  -
    name: ✈️Telegram
    type: select
    use:
      - sbcnnet
      - Jsnzkpg
      - mkkhack
      - ShareCentre
    proxies:
      - 🔰国外流量
      - ♻️自动选择
  -
    name: 🎬Youtube
    type: select
    use:
      - sbcnnet
      - Jsnzkpg
      - mkkhack
      - ShareCentre
    proxies:
      - 🔰国外流量
      - ♻️自动选择
      - 🚀直接连接
  -
    name: 🎬Netflix
    type: select
    use:
      - sbcnnet
      - Jsnzkpg
      - mkkhack
      - ShareCentre
    proxies:
      - 🔰国外流量
      - ♻️自动选择
      - 🚀直接连接
  -
    name: 🎬哔哩哔哩
    type: select
    use:
      - sbcnnet
      - Jsnzkpg
      - mkkhack
      - ShareCentre
    proxies:
      - 🔰国外流量
      - ♻️自动选择
      - 🚀直接连接
  -
    name: 🎬国外媒体
    type: select
    use:
      - sbcnnet
      - Jsnzkpg
      - mkkhack
      - ShareCentre
    proxies:
      - 🔰国外流量
      - ♻️自动选择
      - 🚀直接连接  
  -
    name: 🛠谷歌服务
    type: select
    use:
      - sbcnnet
      - Jsnzkpg
      - mkkhack
      - ShareCentre
    proxies:
      - 🔰国外流量
      - ♻️自动选择
      - 🚀直接连接
  -
    name: ⚓️其他流量
    type: select
    proxies:
      - 🔰国外流量
      - ♻️自动选择
      - 🚀直接连接
  -
    name: 🚀直接连接
    type: select
    proxies:
      - DIRECT

rule-providers:
  global:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@release/rule/Clash/GlobalMax/GlobalMax_Classical.yaml"
    path: ./ruleset/GlobalMax_Classical.yaml
    interval: 86400

  reject:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@release/rule/Clash/Advertising/Advertising_Classical.yaml"
    path: ./ruleset/reject.yaml
    interval: 86400

  apple:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@release/rule/Clash/Apple/Apple.yaml"
    path: ./ruleset/apple.yaml
    interval: 86400

  telegram:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@release/rule/Clash/Telegram/Telegram.yaml"
    path: ./ruleset/telegram.yaml
    interval: 86400

  youtube:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@release/rule/Clash/YouTube/YouTube.yaml"
    path: ./ruleset/youtube.yaml
    interval: 86400

  Microsoft:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@release/rule/Clash/Microsoft/Microsoft.yaml"
    path: ./ruleset/Microsoft.yaml
    interval: 86400

  BiliBili:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@release/rule/Clash/BiliBili/BiliBili.yaml"
    path: ./ruleset/BiliBili.yaml
    interval: 86400

  Google:
    type: http
    behavior: classical
    url: "https://cdn.jsdelivr.net/gh/blackmatrix7/ios_rule_script@release/rule/Clash/Google/Google.yaml"
    path: ./ruleset/Google.yaml
    interval: 86400
    
rules:
  # Clash Premium 内核的规则集（RULE-SET）https://github.com/Loyalsoldier/clash-rules
  - RULE-SET,reject,REJECT
  - RULE-SET,apple,🍎苹果服务
  - RULE-SET,telegram,✈️Telegram
  - RULE-SET,youtube,🎬Youtube
  - RULE-SET,Microsoft,💻微软服务
  - RULE-SET,BiliBili,🎬哔哩哔哩
  - RULE-SET,Google,🛠谷歌服务
  - RULE-SET,global,🔰国外流量
  - DOMAIN,clash.razord.top,DIRECT
  - DOMAIN,yacd.haishan.me,DIRECT
  - DOMAIN-SUFFIX,nfcloud.one,⚓️其他流量
  - DOMAIN-SUFFIX,v2rayssr.com,⚓️其他流量
  - DOMAIN-SUFFIX,mirror.xyz,⚓️其他流量
  - DOMAIN-SUFFIX,safepal.io,⚓️其他流量
  - DOMAIN-SUFFIX,okx.com,⚓️其他流量
  - MATCH,DIRECT

http:
    rewrite:
    - ^http://g\.cn http://www.google.com header # 重写请求头的域名
    - ^https?://www\.google\.cn https://www.google.com 302 # 直接返回一个 302 重定向的响应
    - ^https?://ad\.example - reject # 拒绝请求
